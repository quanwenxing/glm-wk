# 中学受験学習サイト 要件定義書

## 1. プロジェクト概要

### 1.1 目的
中学受験を準備している小学生向けの、紙のテキストだけではわかりにくい理科などのテーマについて、画像や動画を活用しながら楽しく勉強できる学習サイトを開発する。

### 1.2 開発方針
- 最初から完璧に作る必要はない
- 最低限のMVPからスタートし、徐々に改善・機能追加していく
- コンテンツはユーザーが提供する素材をシステムに反映して更新していく

---

## 2. ターゲットユーザー

| 項目 | 内容 |
|------|------|
| 対象学年 | 小学4年生〜6年生 |
| 利用目的 | 塾での学習テーマの予習・復習 |
| 利用デバイス | PC、タブレット、スマートフォン（レスポンシブ対応） |

---

## 3. 対象科目

- 国語
- 算数
- 理科
- 社会

---

## 4. コンテンツ更新ワークフロー

ユーザーが提供する以下の素材をシステムに反映してコンテンツを更新する：

| 入力素材 | 形式 | 反映方法 |
|----------|------|----------|
| テキスト | テキストファイル、または直接入力 | Markdown/JSONとして保存 |
| 画像 | PNG、JPG、WEBP等 | `/public/images/` に配置、Markdownから参照 |
| 動画 | YouTube/VimeoのURL | iframe埋め込みコードとして保存 |
| PDF資料 | PDFファイル | `/public/documents/` に配置、ダウンロードリンクとして表示 |

### コンテンツ更新フロー
1. ユーザーが新規テーマの素材（テキスト、画像、動画URLなど）を提供
2. 開発者が素材を適切なディレクトリに配置
3. JSONファイルまたはMarkdownファイルにメタデータを追加
4. システムがファイルを自動読み込みして表示

---

## 5. 機能要件

### 5.1 MVPで実装する機能（優先度高）

| 機能 | 詳細 | 優先度 |
|------|------|--------|
| テーマ一覧・閲覧 | 科目・学年別に学習テーマを一覧表示、詳細閲覧 | 必須 |
| 理解度クイズ | 各テーマ学習後に理解度を確認するクイズ機能 | 必須 |
| ユーザー登録・ログイン | メールアドレスとパスワードでアカウント作成・ログイン | 必須 |
| 学習進捗の記録 | ユーザーごとにどのテーマを学習したかを記録 | 必須 |

### 5.2 フェーズ2以降で実装する機能（優先度中・低）

| 機能 | 詳細 | 優先度 |
|------|------|--------|
| マイページ | 学習進捗の一覧表示、統計グラフ | 中 |
| 動画プレイヤー | YouTube/Vimeoの埋め込み動画再生 | 中 |
| 管理画面 | 非エンジニアでもコンテンツ追加・編集可能なGUI | 低 |
| スタンプ機能 | 学習完了時のスタンプ獲得（ゲーミフィケーション） | 低 |
| 保護者ダッシュボード | お子様の学習状況を保護者向けに表示 | 低 |

### 5.3 MVPの範囲（最初のリリース）

- 学習者の利用体験に必要な最小限の機能のみ実装
- 管理機能はコードベースのファイル編集で対応
- 1〜2つのサンプルテーマのみ実装
- クイズは1テーマあたり2〜3問程度

---

## 6. デザイン要件

| 項目 | 内容 |
|------|------|
| デザインイメージ | 楽しく学べるポップでカラフルな子供向けデザイン |
| UI方針 | 小学生でも直感的に使えるシンプルな操作感 |
| レスポンシブ | PC・タブレット・スマートフォン全てに対応 |

---

## 7. 技術スタック

### 7.1 フロントエンド
- **フレームワーク**: Next.js（App Router）
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **UIコンポーネント**: shadcn/ui（カスタマイズしてポップなデザインに）

### 7.2 バックエンド
- **API**: Next.js API Routes
- **認証**: NextAuth.js または Clerk
- **データベース**: Cloudflare D1（SQLiteベース）または Turso

### 7.3 コンテンツ管理
- JSON/Markdownファイルで直接管理
- コンテンツ追加時はファイルを配置・更新するのみ

### 7.4 ホスティング
- **サービス**: Cloudflare Pages
- **デプロイ**: GitHub連携で自動デプロイ

---

## 8. ページ構成

### 8.1 MVPで実装

| ページ | パス | 説明 |
|--------|------|------|
| ホーム | `/` | サイトトップ、科目・学年選択 |
| 科目一覧 | `/subjects/[subject]` | 科目別のテーマ一覧 |
| テーマ詳細 | `/themes/[id]` | 個別の学習テーマページ |
| クイズ | `/quiz/[themeId]` | テーマ別の理解度クイズ |
| ログイン | `/login` | ユーザーログイン |
| 新規登録 | `/signup` | ユーザー登録 |

### 8.2 フェーズ2以降

| ページ | パス | 説明 |
|--------|------|------|
| マイページ | `/mypage` | 学習進捗の確認 |
| 管理画面 | `/admin` | コンテンツ管理 |

---

## 9. データモデル

### 9.1 ユーザー（users）
| カラム | 型 | 説明 |
|--------|------|------|
| id | string | ユーザーID |
| email | string | メールアドレス |
| password_hash | string | パスワードハッシュ |
| name | string | ユーザー名 |
| grade | number | 学年（4-6） |
| created_at | datetime | 作成日時 |

### 9.2 テーマ（themes）
| カラム | 型 | 説明 |
|--------|------|------|
| id | string | テーマID |
| subject | string | 科目（kokugo/sansu/rika/shakai） |
| grade | number | 対象学年（4/5/6） |
| title | string | タイトル |
| description | string | 説明（一覧用） |
| content | text | コンテンツ（Markdown） |
| video_url | string | 動画URL（任意） |
| order | number | 表示順 |

### 9.3 クイズ（quizzes）
| カラム | 型 | 説明 |
|--------|------|------|
| id | string | クイズID |
| theme_id | string | 対象テーマID |
| question | string | 問題文 |
| options | json | 選択肢 ["選択肢1", "選択肢2", "選択肢3", "選択肢4"] |
| correct_answer | number | 正解のインデックス（0-3） |
| order | number | 表示順 |

### 9.4 学習進捗（progress）
| カラム | 型 | 説明 |
|--------|------|------|
| id | string | 進捗ID |
| user_id | string | ユーザーID |
| theme_id | string | テーマID |
| completed | boolean | 完了フラグ |
| quiz_score | number | クイズスコア |
| completed_at | datetime | 完了日時 |

---

## 10. ファイル構成（案）

```
/
├── app/                    # Next.js App Router
│   ├── (auth)/
│   │   ├── login/
│   │   └── signup/
│   ├── subjects/
│   │   └── [subject]/
│   ├── themes/
│   │   └── [id]/
│   ├── quiz/
│   │   └── [themeId]/
│   └── page.tspx           # ホーム
├── components/
│   ├── ui/                 # shadcn/ui コンポーネント
│   ├── ThemeCard.tsx
│   ├── QuizCard.tsx
│   └── ...
├── lib/
│   ├── db.ts               # データベース接続
│   └── auth.ts             # 認証関連
├── public/
│   ├── images/             # 画像ファイル
│   └── documents/          # PDF資料
└── content/
    ├── themes/             # テーマデータ（JSON/MD）
    └── quizzes/            # クイズデータ（JSON）
```

---

## 11. 並行開発体制

### 11.1 役割定義

| 役割 | 担当内容 | 必要人数 |
|------|----------|----------|
| 統括管理者（PM） | 全体進捗管理、タスク割り当て、品質管理、リスク対応 | 1名 |
| フロントエンド担当 | ページ実装、UIコンポーネント、レスポンシブ対応 | 1〜2名 |
| バックエンド担当 | API実装、DB設計、認証機能 | 1名 |
| デザイン担当 | デザインシステム、UI/UX、アセット作成 | 1名 |
| コンテンツ担当 | サンプルコンテンツ作成、素材整理 | 1名 |

### 11.2 タスク管理ルール

- **GitHub Projects** を使用してタスク管理
- **GitHub Issues** で個別タスクを管理
- **ブランチ戦略**: feature/機能名 ブランチで開発
- **コードレビュー**: すべてのPRは統括管理者または指名担当者によるレビュー必須
- **ステータス更新**: 担当者は毎日タスクの進捗を更新

---

## 12. MVP開発タスク一覧（並行実行可能）

### 12.1 タスク依存関係マップ

```
[A] プロジェクトセットアップ（全タスクの前提）
 │
 ├─→ [B] デザインシステム構築（並行実行可能）
 │    └─→ [D] コンポーネント実装
 │         └─→ [F] ページ実装
 │
 ├─→ [C] データベース設計・構築（並行実行可能）
 │    └─→ [E] API実装
 │         └─→ [F] ページ実装
 │
 └─→ [K] 認証機能実装（並行実行可能）
      └─→ [F] ページ実装
           └─→ [G] 統合・テスト
```

### 12.2 スプリント1：基盤構築（並行実行）

| タスクID | タスク名 | 担当 | 依存 | 想定時間 | 優先度 |
|----------|----------|------|------|----------|--------|
| **A-1** | Next.jsプロジェクト初期化 | BE | - | 2h | 高 |
| **A-2** | TypeScript/Tailwind設定 | BE | A-1 | 2h | 高 |
| **A-3** | shadcn/ui導入・設定 | FE | A-2 | 2h | 高 |
| **A-4** | Gitリポジトリ・GitHub Projects設定 | PM | - | 2h | 高 |
| **B-1** | カラーパターン・タイポグラフィ定義 | Design | A-4 | 3h | 高 |
| **B-2** | デザイントークン（Tailwind設定）作成 | Design | B-1 | 2h | 高 |
| **C-1** | ER図・DBスキーマ設計 | BE | A-1 | 3h | 高 |
| **C-2** | Cloudflare D1セットアップ | BE | C-1 | 2h | 高 |
| **K-1** | NextAuth.js導入・設定 | BE | A-1 | 3h | 高 |

### 12.3 スプリント2：コンポーネント・API開発（並行実行）

| タスクID | タスク名 | 担当 | 依存 | 想定時間 | 優先度 |
|----------|----------|------|------|----------|--------|
| **D-1** | Button/Input/Card等UIコンポーネント実装 | FE | B-2, A-3 | 4h | 高 |
| **D-2** | ThemeCardコンポーネント実装 | FE | D-1 | 3h | 高 |
| **D-3** | QuizCardコンポーネント実装 | FE | D-1 | 3h | 高 |
| **E-1** | テーマ取得API実装 | BE | C-2 | 3h | 高 |
| **E-2** | クイズ取得API実装 | BE | C-2 | 2h | 高 |
| **E-3** | 進捗記録・取得API実装 | BE | C-2 | 3h | 高 |
| **E-4** | ユーザー登録・ログインAPI実装 | BE | K-1 | 4h | 高 |
| **L-1** | サンプルテーマデータ作成（理科1件） | Content | - | 2h | 中 |
| **L-2** | サンプルクイズデータ作成（2〜3問） | Content | L-1 | 1h | 中 |

### 12.4 スプリント3：ページ実装（並行実行）

| タスクID | タスク名 | 担当 | 依存 | 想定時間 | 優先度 |
|----------|----------|------|------|----------|--------|
| **F-1** | ホームページ実装 | FE | D-2, E-1 | 4h | 高 |
| **F-2** | 科目一覧ページ実装 | FE | D-2, E-1 | 3h | 高 |
| **F-3** | テーマ詳細ページ実装 | FE | D-2, E-1 | 4h | 高 |
| **F-4** | クイズページ実装 | FE | D-3, E-2 | 4h | 高 |
| **F-5** | ログインページ実装 | FE | D-1, E-4 | 3h | 高 |
| **F-6** | 新規登録ページ実装 | FE | D-1, E-4 | 3h | 高 |
| **F-7** | レスポンシブ対応調整 | FE | F-1〜F-6 | 4h | 高 |

### 12.5 スプリント4：統合・テスト

| タスクID | タスク名 | 担当 | 依存 | 想定時間 | 優先度 |
|----------|----------|------|------|----------|--------|
| **G-1** | 機能統合・連携テスト | 全 | F-1〜F-7 | 4h | 高 |
| **G-2** | UI/UX微調整 | Design/FE | G-1 | 3h | 中 |
| **G-3** | バグ修正・リファクタリング | 全 | G-1 | 4h | 中 |
| **G-4** | Cloudflare Pagesデプロイ設定 | DevOps | - | 2h | 高 |
| **G-5** | 本番デプロイ・動作確認 | DevOps/PM | G-4 | 2h | 高 |

---

## 13. 統括管理者向け進捗管理プロセス

### 13.1 進捗確認フロー

```
┌─────────────────────────────────────────────────────────────────┐
│                     統括管理者（PM）                              │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ├─ 朝のスタンドアップ（15分）
                              │  └─ 各担当、前日の成果・今日の予定・ブロッキングを共有
                              │
                              ├─ 進捗ダッシュボード確認（随時）
                              │  └─ GitHub Projectsで各タスクのステータスを確認
                              │
                              ├─ コードレビュー（随時）
                              │  └─ PRが上がったら timely にレビュー
                              │
                              ├─ 週次進捗会議（1時間）
                              │  └─ 週の成果、来週の計画、リスク・課題を共有
                              │
                              └─ マイルストーン達成確認
                                 └─ 各スプリント完了時に振り返り・次回の改善点
```

### 13.2 GitHub Projects ボード構成

| カラム | 説明 |
|--------|------|
| `Backlog` | 未着手のタスク |
| `To Do` | 今週〜今スプリントで実施するタスク |
| `In Progress` | 現在実施中のタスク（担当者Assign済み） |
| `In Review` | レビュー待ちのPR |
| `Done` | 完了したタスク |

### 13.3 Issue テンプレート

```markdown
## タスク概要
- タスクID: [XX-XX]
- 担当者: @username
- 予定工数: Xh

## 説明
[タスクの詳細説明]

## 受け入れ条件
- [ ] 条件1
- [ ] 条件2

## 依存タスク
- #issue番号

## 関連ファイル
- パス/ファイル名
```

### 13.4 プルリクエスト（PR）ルール

- **タイトル形式**: `[タスクID] タスク名`
- **説明**: 実装内容、変更点、テスト方法を記載
- **関連Issue**: `Closes #XX` を含める
- **レビュアー**: 統括管理者または指名された担当者をAssign
- **CIチェック**: 全てのチェックが通ってからマージ

### 13.5 リスク管理

| リスク項目 | 対応方法 |
|------------|----------|
| 担当者がブロックされている | スタンドアップで早期発見、PMがサポートを調整 |
| タスク遅延 | GitHub Projectsで可視化、PMが優先度調整 |
| コンフリクト多発 | 定期的なmainへの同期、機能ブランチの小さく保つ |
| 品質低下 | コードレビューの強化、Pair Programmingの導入検討 |

### 13.6 品質チェックリスト（統括管理者用）

- [ ] すべてのタスクがGitHub Projectsで可視化されている
- [ ] 各担当者の作業負荷が適切に分散されている
- [ ] 依存関係が明確で、ブロッキングが発生しないよう調整されている
- [ ] PRが timely にレビューされている
- [ ] CI/CDが正常に動作している
- [ ] バグや懸念点がIssue化され対応されている

---

## 14. 開発スケジュール

| フェーズ | 内容 | 目安 | マイルストーン |
|----------|------|------|----------------|
| スプリント1 | 基盤構築 | 2〜3日 | プロジェクトセットアップ完了 |
| スプリント2 | コンポーネント・API開発 | 3〜4日 | API・UIコンポーネント完了 |
| スプリント3 | ページ実装 | 4〜5日 | MVPページ全て実装完了 |
| スプリント4 | 統合・テスト | 2〜3日 | MVPリリース |
| **合計** | **MVP開発** | **11〜15日** | **初版リリース** |

### 開発後のフェーズ

| フェーズ | 内容 |
|----------|------|
| コンテンツ拡充 | 素材反映、コンテンツ追加（継続的） |
| 機能拡張 | 追加機能の実装（適宜） |

---

*ドキュメント作成日：2026-01-03*
